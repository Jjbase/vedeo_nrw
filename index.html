<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>VEDEO NRW ‚Äì Anmeldung (11.10.2025 D√ºsseldorf)</title>
  <meta name="description" content="Landing Page f√ºr die Anmeldung zum VEDEO NRW Treffen am 11. Oktober 2025 in D√ºsseldorf." />

  <style>
    :root{
      --flag-black:#000; --flag-red:#dd0000; --flag-gold:#ffce00;
      --bg:#f7f7f8; --text:#1f2937; --muted:#6b7280; --card:#fff; --border:#e5e7eb;
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--text);
      font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif}
    .container{max-width:960px;margin:0 auto;padding:24px}
    header.hero{border-radius:18px;overflow:hidden;margin:24px 0;
      background:linear-gradient(90deg,var(--flag-black) 0 33%, var(--flag-red) 33% 66%, var(--flag-gold) 66% 100%)}
    header .inner{background:rgba(255,255,255,.94);padding:28px 24px}
    h1{margin:0 0 8px 0;font-size:clamp(24px,4vw,34px);font-weight:800}
    .subtitle{color:var(--muted);margin:0}

    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:18px;margin:16px 0}
    .section{color:var(--flag-red);text-decoration:underline;text-underline-offset:6px;text-decoration-thickness:2px;margin:0 0 12px 0}
    label{display:block;font-size:14px;font-weight:600;margin:10px 0 6px}
    input,select,textarea{width:100%;padding:11px;border:1px solid var(--border);border-radius:12px;background:#fff}
    input:focus,textarea:focus,select:focus{border-color:var(--flag-red);outline:none;box-shadow:0 0 0 2px #ffce0033}
    .row{display:grid;gap:12px}
    @media (min-width:768px){ .row{grid-template-columns:1fr 1fr} }
    .radio{display:flex;gap:14px;flex-wrap:wrap}
    .note{font-size:12px;color:#9b1c1c;margin-top:4px;min-height:1.25em}
    .btn{appearance:none;border:1px solid var(--border);background:#fff;padding:10px 16px;border-radius:12px;cursor:pointer}
    .btn:hover{background:#fafafa}
    .btn.primary{background:var(--flag-red);color:#fff;border-color:var(--flag-red)}
    .btn.primary:hover{filter:brightness(.96)}
    .muted{font-size:12px;color:var(--muted)}
    footer{margin:24px 0;color:var(--muted);text-align:center;font-size:12px}
    body::after{content:"‚©• WOLF ·¥è Ä ·¥Ö…™·¥á üíÄ"; position:fixed; right:14px; bottom:10px; font-size:11px; letter-spacing:.25em; color:#9ca3af55; user-select:none; pointer-events:none}
  </style>
</head>
<body>
  <div class="container">
    <header class="hero">
      <div class="inner">
        <h1>VEDEO NRW ‚Äì Anmeldung</h1>
        <p class="subtitle">Einladung zum <b>Samstag, 11. Oktober 2025</b> in <b>D√ºsseldorf</b>.</p>
      </div>
    </header>

    <!-- WICHTIG: Netlify-Form (mit eigener Danke-Seite) -->
    <form id="form" name="anmeldung" method="POST"
          data-netlify="true" netlify-honeypot="bot-field"
          action="/thanks.html" novalidate>
      <input type="hidden" name="form-name" value="anmeldung" />
      <p style="display:none">
        <label>Bitte frei lassen: <input name="bot-field" /></label>
      </p>

      <!-- Kontakt -->
      <div class="card">
        <h2 class="section">Kontaktinformationen</h2>
        <div class="row">
          <div>
            <label for="name">Name <span style="color:var(--flag-red)">*</span></label>
            <input id="name" name="name" required placeholder="Vor- und Nachname" />
            <div class="note" data-err="name"></div>
          </div>
          <div>
            <label for="phone">Telefon</label>
            <input id="phone" name="phone" placeholder="+49 ‚Ä¶" />
          </div>
          <div>
            <label for="email">E-Mail-Adresse <span style="color:var(--flag-red)">*</span></label>
            <input id="email" name="email" type="email" required placeholder="name@example.com" />
            <div class="note" data-err="email"></div>
          </div>
          <div>
            <label for="city">Adresse (Stadt/Ort) <span style="color:var(--flag-red)">*</span></label>
            <input id="city" name="city" required placeholder="z. B. D√ºsseldorf" />
            <div class="note" data-err="city"></div>
          </div>
          <div>
            <label for="country">Land <span style="color:var(--flag-red)">*</span></label>
            <input id="country" name="country" required value="Deutschland" />
            <div class="note" data-err="country"></div>
          </div>
        </div>
      </div>

      <!-- Status an der DEO -->
      <div class="card">
        <h2 class="section">Status an der DEO (ehemalig)</h2>

        <div class="radio" role="radiogroup" aria-labelledby="role-label" style="margin-top:4px">
          <span id="role-label" class="muted" style="position:absolute;left:-9999px">Status ausw√§hlen</span>
          <label><input type="radio" name="role" value="schueler" checked /> Ehemalige/r Sch√ºler/in</label>
          <label><input type="radio" name="role" value="lehrer" /> Ehemalige/r Lehrer/in</label>
          <label><input type="radio" name="role" value="verwaltung" /> Ehemalige/r Verwaltungsbeauftragte/r</label>
        </div>

        <div class="row" style="margin-top:8px">
          <div>
            <label for="deo_from">Ab wann an der DEO <span style="color:var(--flag-red)">*</span></label>
            <input id="deo_from" name="deo_from" type="month" required />
            <div class="note" data-err="deo_from"></div>
          </div>
          <div>
            <label for="deo_to">Bis wann an der DEO <span style="color:var(--flag-red)">*</span></label>
            <input id="deo_to" name="deo_to" type="month" required />
            <div class="note" data-err="deo_to"></div>
          </div>
        </div>

        <!-- rollenspezifisch -->
        <div id="role-extra" style="margin-top:8px"></div>
      </div>

      <!-- Anmeldung -->
      <div class="card">
        <h2 class="section">Anmeldung zum VEDEO NRW Treffen</h2>

        <div class="radio">
          <label><input type="radio" name="attending" value="ja" /> ja</label>
          <label><input type="radio" name="attending" value="nein" /> nein</label>
          <label><input type="radio" name="attending" value="vielleicht" /> vielleicht</label>
        </div>
        <div class="note" data-err="attending"></div>

        <div id="companions-wrap" style="display:none;margin-top:10px">
          <label for="companions">Wer kommt noch mit (Anzahl der Begleiter)?</label>
          <input id="companions" name="companions" type="number" min="0" value="0" style="max-width:180px" />
          <div class="note" data-err="companions"></div>
        </div>
      </div>

      <!-- Zukunft -->
      <div class="card">
        <h2 class="section">Zuk√ºnftige VEDEO Treffen</h2>
        <div class="row">
          <div>
            <label>Bist Du an zuk√ºnftigen Treffen in NRW interessiert? <span style="color:var(--flag-red)">*</span></label>
            <div class="radio">
              <label><input type="radio" name="future_interest" value="ja" /> ja</label>
              <label><input type="radio" name="future_interest" value="nein" /> nein</label>
            </div>
            <div class="note" data-err="future_interest"></div>
          </div>
          <div>
            <label for="future_locations">Wo sonst in der Welt sollte VEDEO Treffen organisieren?</label>
            <input id="future_locations" name="future_locations" placeholder="z. B. Kairo, Berlin, Dubai ‚Ä¶" />
          </div>
        </div>
      </div>

      <!-- Datenschutz -->
      <div class="card">
        <h2 class="section">Datenschutz</h2>
        <label class="radio" style="align-items:flex-start">
          <input id="consent" name="consent" type="checkbox" required />
          <span>Ich stimme zu, dass meine Angaben zur Organisation des Treffens gespeichert und verarbeitet werden.
            <span style="color:var(--flag-red)">*</span></span>
        </label>
        <div class="note" data-err="consent"></div>
        <p class="muted" style="margin-top:8px">
          Hinweis: Die Daten werden ausschlie√ülich f√ºr Planung und Kommunikation im Rahmen des VEDEO NRW Treffens verwendet.
        </p>
      </div>

      <div style="display:flex;gap:10px;flex-wrap:wrap">
        <button type="submit" class="btn primary">E-Mail direkt senden</button>
        <button type="button" id="btnJson" class="btn">Daten als JSON herunterladen</button>
        <button type="reset" class="btn">Zur√ºcksetzen</button>
      </div>
    </form>

    <footer>¬© <span id="y"></span> VEDEO NRW ‚Äì Treffen D√ºsseldorf, 11.10.2025</footer>
  </div>

  <script>
    const $  = (sel) => document.querySelector(sel);
    const $$ = (sel) => document.querySelectorAll(sel);
    const err = (k, msg) => { const el = document.querySelector(`[data-err="${k}"]`); if (el) el.textContent = msg || ""; };
    document.getElementById("y").textContent = new Date().getFullYear();

    // Rollenspezifische Felder
    function renderRoleExtra(){
      const role = document.querySelector('input[name="role"]:checked').value;
      const wrap = $("#role-extra");
      if(role === "schueler"){
        wrap.innerHTML = `
          <label for="classes">Welche Klassen hast Du besucht? <span style="color:#dd0000">*</span></label>
          <textarea id="classes" name="classes_attended" rows="3" placeholder="z. B. 5a‚Äì12b" required></textarea>
          <div class="note" data-err="classes"></div>`;
      } else if(role === "lehrer"){
        wrap.innerHTML = `
          <label for="subjects">Welche F√§cher & Klassen hast Du gelehrt? <span style="color:#dd0000">*</span></label>
          <textarea id="subjects" name="subjects_taught" rows="3" placeholder="z. B. Mathe (5‚Äì9), Physik (10‚Äì12)" required></textarea>
          <div class="note" data-err="subjects"></div>`;
      } else {
        wrap.innerHTML = `
          <label for="dept">In welcher Abteilung hast Du gearbeitet? <span style="color:#dd0000">*</span></label>
          <input id="dept" name="dept" placeholder="z. B. Sekretariat, Verwaltung, Technik" required />
          <div class="note" data-err="dept"></div>`;
      }
    }
    $$('.radio input[name="role"]').forEach(r => r.addEventListener('change', renderRoleExtra));
    renderRoleExtra();

    // Begleiterfeld nur bei "ja"
    function toggleCompanions(){
      const v = document.querySelector('input[name="attending"]:checked')?.value || "";
      $("#companions-wrap").style.display = (v === "ja") ? "block" : "none";
    }
    $$('input[name="attending"]').forEach(r => r.addEventListener('change', toggleCompanions));
    toggleCompanions();

    // Leichte Vorvalidierung ‚Äì blockt nur bei Fehlern (damit Netlify den POST annehmen kann)
    $('#form').addEventListener('submit', (e)=>{
      let ok = true;
      const need = [
        ['name','Bitte Name eintragen.'],
        ['email','Bitte E-Mail eintragen.'],
        ['city','Bitte Stadt/Ort eintragen.'],
        ['country','Bitte Land eintragen.'],
        ['deo_from','Bitte Startmonat/-jahr angeben.'],
        ['deo_to','Bitte Endmonat/-jahr angeben.']
      ];
      need.forEach(([id,msg])=>{
        const v = document.getElementById(id)?.value?.trim();
        err(id, v ? '' : msg); ok &&= !!v;
      });

      // rollenspezifisch
      const role = document.querySelector('input[name="role"]:checked')?.value;
      if(role==='schueler'){ ok &&= !!document.getElementById('classes')?.value?.trim(); if(!ok) err('classes','Bitte besuchte Klassen eintragen.'); }
      if(role==='lehrer'){ ok &&= !!document.getElementById('subjects')?.value?.trim(); if(!ok) err('subjects','Bitte F√§cher & Klassen eintragen.'); }
      if(role==='verwaltung'){ ok &&= !!document.getElementById('dept')?.value?.trim(); if(!ok) err('dept','Bitte Abteilung eintragen.'); }

      const ai = document.querySelector('input[name="attending"]:checked'); ok &&= !!ai; if(!ai) err('attending','Bitte ausw√§hlen, ob du kommst.');

      const fi = document.querySelector('input[name="future_interest"]:checked'); ok &&= !!fi; if(!fi) err('future_interest','Bitte Auswahl treffen.');

      const consent = document.getElementById('consent').checked; ok &&= consent; if(!consent) err('consent','Bitte Zustimmung erteilen.');

      if(!ok){ e.preventDefault(); window.scrollTo({top:0,behavior:'smooth'}); }
    });

    // JSON Download (lokal f√ºr dich)
    document.getElementById('btnJson').addEventListener('click', ()=>{
      const role = document.querySelector('input[name="role"]:checked')?.value;
      const data = {
        name:$('#name').value.trim(),
        phone:$('#phone').value.trim(),
        email:$('#email').value.trim(),
        city:$('#city').value.trim(),
        country:$('#country').value.trim(),
        deo_from:$('#deo_from').value, deo_to:$('#deo_to').value,
        role,
        classes_attended: role==='schueler' ? ($('#classes')?.value.trim()||'') : '',
        subjects_taught: role==='lehrer' ? ($('#subjects')?.value.trim()||'') : '',
        dept: role==='verwaltung' ? ($('#dept')?.value.trim()||'') : '',
        attending: document.querySelector('input[name="attending"]:checked')?.value || '',
        companions: Number(document.getElementById('companions')?.value||0),
        future_interest: document.querySelector('input[name="future_interest"]:checked')?.value || '',
        future_locations: document.getElementById('future_locations').value.trim(),
        consent: document.getElementById('consent').checked
      };
      const blob = new Blob([JSON.stringify(data,null,2)],{type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href=url; a.download=`vedeo-nrw-anmeldung-${(data.name||'unbekannt').replace(/\s+/g,'_')}.json`;
      a.click(); URL.revokeObjectURL(url);
    });
  </script>
</body>
</html>
