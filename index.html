<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>VEDEO NRW ‚Äì Anmeldung (11.10.2025 D√ºsseldorf)</title>
  <meta name="description" content="Anmeldung f√ºr das VEDEO NRW Treffen am 11. Oktober 2025 in D√ºsseldorf.">
  <style>
    :root{
      --flag-black:#000; --flag-red:#dd0000; --flag-gold:#ffce00;
      --bg:#f7f7f8; --text:#1f2937; --muted:#6b7280; --card:#fff; --border:#e5e7eb;
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--text);font:16px/1.45 system-ui,Segoe UI,Roboto,Arial,sans-serif}
    .wrap{max-width:960px;margin:24px auto;padding:0 16px}
    header.hero{color:#fff;padding:26px 22px;border-radius:16px;background:linear-gradient(90deg,var(--flag-black) 0 33%,var(--flag-red) 33% 66%,var(--flag-gold) 66% 100%);box-shadow:0 6px 18px rgba(0,0,0,.08)}
    h1{margin:.2rem 0 0;font-size:clamp(26px,4vw,38px);font-weight:800}
    .subtitle{margin-top:6px;color:#fff;opacity:.95}
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:22px;box-shadow:0 6px 18px rgba(0,0,0,.05);margin-top:16px}
    h2{color:var(--flag-red);margin: 8px 0 12px;font-size:clamp(18px,2.6vw,22px);text-decoration:underline;text-underline-offset:6px;text-decoration-thickness:2px}
    .grid{display:grid;gap:14px;grid-template-columns:1fr}
    @media(min-width:760px){ .grid-2{grid-template-columns:repeat(2,1fr)} }
    label{display:block;font-weight:600;margin-bottom:6px}
    input,select,textarea{width:100%;background:#fff;border:1px solid var(--border);border-radius:10px;padding:11px 12px;font-size:16px}
    textarea{min-height:90px;resize:vertical}
    input:focus,select:focus,textarea:focus{border-color:var(--flag-red);outline:0;box-shadow:0 0 0 3px #dd000022}
    .note{font-size:13px;color:#b91c1c;min-height:1.1em;margin-top:4px}
    .radio{display:flex;gap:18px;flex-wrap:wrap}
    .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .btn{background:#fff;color:var(--text);border:1px solid var(--border);border-radius:10px;padding:12px 16px;font-weight:700;cursor:pointer}
    .btn.primary{background:var(--flag-red);color:#fff;border-color:var(--flag-red)}
    .muted{font-size:12px;color:var(--muted)}
    footer{margin:26px 0 18px;text-align:center;color:var(--muted);font-size:13px}
    body::after{content:"‚©• WOLF ·¥è Ä ·¥Ö…™·¥á üíÄ"; position:fixed; right:14px; bottom:10px; font-size:11px; letter-spacing:.25em; color:#9ca3af55; user-select:none; pointer-events:none}
    .hide{display:none !important;}
  </style>
</head>
<body>
  <div class="wrap">
    <header class="hero card">
      <h1>VEDEO NRW ‚Äì Anmeldung</h1>
      <p class="subtitle">Einladung zum VEDEO NRW Treffen am <b>Samstag, 11. Oktober 2025</b> in <b>D√ºsseldorf</b>.</p>
    </header>

    <!-- NETLIFY FORM -->
    <section class="card">
      <form
        id="form"
        name="anmeldung"
        method="POST"
        action="/thanks.html"
        data-netlify="true"
        netlify-honeypot="bot-field"
        novalidate
      >
        <!-- Pflicht f√ºr Netlify-Erkennung -->
        <input type="hidden" name="form-name" value="anmeldung">
        <!-- Spam-Honeypot -->
        <p class="hide"><label>Bitte frei lassen <input name="bot-field"></label></p>

        <!-- 1) Kontakt -->
        <h2>Kontaktinformationen</h2>
        <div class="grid grid-2">
          <div>
            <label for="name">Name <span class="muted">*</span></label>
            <input id="name" name="name" required />
            <div class="note" data-err="name"></div>
          </div>
          <div>
            <label for="phone">Telefon</label>
            <input id="phone" name="phone" placeholder="+49 ‚Ä¶" />
          </div>
          <div>
            <label for="email">E-Mail-Adresse <span class="muted">*</span></label>
            <input id="email" name="email" type="email" required placeholder="name@example.com" />
            <div class="note" data-err="email"></div>
          </div>
          <div>
            <label for="city">Adresse (Stadt/Ort) <span class="muted">*</span></label>
            <input id="city" name="city" required />
            <div class="note" data-err="city"></div>
          </div>
          <div>
            <label for="country">Land <span class="muted">*</span></label>
            <input id="country" name="country" value="Deutschland" required />
            <div class="note" data-err="country"></div>
          </div>
        </div>

        <!-- 2) Status -->
        <h2>Status an der DEO (ehemalig)</h2>
        <div class="radio" role="radiogroup" aria-labelledby="role-label" style="margin-top:4px">
          <span id="role-label" class="muted" style="position:absolute;left:-9999px">Status ausw√§hlen</span>
          <label><input type="radio" name="role" value="schueler" checked> Ehemalige/r Sch√ºler/in</label>
          <label><input type="radio" name="role" value="lehrer"> Ehemalige/r Lehrer/in</label>
          <label><input type="radio" name="role" value="verwaltung"> Ehemalige/r Verwaltungsbeauftragte/r</label>
        </div>

        <div class="grid grid-2" style="margin-top:8px">
          <div>
            <label for="deo_from">Ab wann an der DEO <span class="muted">*</span></label>
            <input id="deo_from" name="deo_from" type="month" required />
            <div class="note" data-err="deo_from"></div>
          </div>
          <div>
            <label for="deo_to">Bis wann an der DEO <span class="muted">*</span></label>
            <input id="deo_to" name="deo_to" type="month" required />
            <div class="note" data-err="deo_to"></div>
          </div>
        </div>

        <!-- rollenspezifisch -->
        <div id="role-extra" style="margin-top:8px"></div>

        <!-- 3) Anmeldung -->
        <h2>Anmeldung zum VEDEO NRW Treffen</h2>
        <div class="radio">
          <label><input type="radio" name="attending" value="ja"> ja</label>
          <label><input type="radio" name="attending" value="nein"> nein</label>
          <label><input type="radio" name="attending" value="vielleicht"> vielleicht</label>
        </div>
        <div class="note" data-err="attending"></div>

        <div id="companions-wrap" class="hide">
          <label for="companions">Wer kommt noch mit (Anzahl der Begleiter)?</label>
          <input id="companions" name="companions" type="number" min="0" value="0" style="max-width:180px" />
          <div class="note" data-err="companions"></div>
        </div>

        <!-- 4) Zukunft -->
        <h2>Zuk√ºnftige VEDEO Treffen</h2>
        <div class="grid grid-2">
          <div>
            <label>Interessiert an zuk√ºnftigen Treffen in NRW? <span class="muted">*</span></label>
            <div class="radio">
              <label><input type="radio" name="future_interest" value="ja"> ja</label>
              <label><input type="radio" name="future_interest" value="nein"> nein</label>
            </div>
            <div class="note" data-err="future_interest"></div>
          </div>
          <div>
            <label for="future_locations">Wo sonst in der Welt sollte VEDEO Treffen organisieren?</label>
            <input id="future_locations" name="future_locations" placeholder="z. B. Kairo, Berlin, Dubai ‚Ä¶" />
          </div>
        </div>

        <!-- 5) Datenschutz -->
        <h2>Datenschutz</h2>
        <label class="radio" style="align-items:flex-start">
          <input id="consent" name="consent" type="checkbox" required />
          <span>Ich stimme zu, dass meine Angaben zur Organisation des Treffens gespeichert und verarbeitet werden.
            <span style="color:var(--flag-red)">*</span></span>
        </label>
        <div class="note" data-err="consent"></div>
        <p class="muted" style="margin-top:8px">
          Hinweis: Die Daten werden ausschlie√ülich f√ºr Planung und Kommunikation im Rahmen des VEDEO NRW Treffens verwendet.
        </p>

        <div class="actions">
          <button class="btn primary" type="submit">E-Mail direkt senden</button>
          <button class="btn" type="button" id="btnJson">Daten als JSON herunterladen</button>
          <button class="btn" type="reset">Zur√ºcksetzen</button>
        </div>
      </form>
    </section>

    <footer>
      ¬© <span id="y"></span> VEDEO NRW ‚Äì Treffen D√ºsseldorf, 11.10.2025
    </footer>
  </div>

  <script>
    const $  = (s)=>document.querySelector(s);
    const $$ = (s)=>document.querySelectorAll(s);
    const err = (k,m)=>{ const el=document.querySelector(`[data-err="${k}"]`); if(el) el.textContent=m||''; };
    $('#y').textContent = new Date().getFullYear();

    // rollenspezifische Felder
    function renderRoleExtra(){
      const role = document.querySelector('input[name="role"]:checked').value;
      const wrap = $('#role-extra');
      if(role==='schueler'){
        wrap.innerHTML = `
          <label for="classes">Welche Klassen hast Du besucht? <span style="color:#dd0000">*</span></label>
          <textarea id="classes" name="classes_attended" rows="3" placeholder="z. B. 5a‚Äì12b" required></textarea>
          <div class="note" data-err="classes"></div>`;
      }else if(role==='lehrer'){
        wrap.innerHTML = `
          <label for="subjects">Welche F√§cher & Klassen hast Du gelehrt? <span style="color:#dd0000">*</span></label>
          <textarea id="subjects" name="subjects_taught" rows="3" placeholder="z. B. Mathe (5‚Äì9), Physik (10‚Äì12)" required></textarea>
          <div class="note" data-err="subjects"></div>`;
      }else{
        wrap.innerHTML = `
          <label for="dept">In welcher Abteilung hast Du gearbeitet? <span style="color:#dd0000">*</span></label>
          <input id="dept" name="dept" placeholder="z. B. Sekretariat, Verwaltung, Technik" required />
          <div class="note" data-err="dept"></div>`;
      }
    }
    $$('.radio input[name="role"]').forEach(r=>r.addEventListener('change',renderRoleExtra));
    renderRoleExtra();

    // Begleiter nur bei "ja"
    function toggleCompanions(){
      const v = document.querySelector('input[name="attending"]:checked')?.value || '';
      $('#companions-wrap').classList.toggle('hide', v!=='ja');
    }
    $$('input[name="attending"]').forEach(r=>r.addEventListener('change',toggleCompanions));
    toggleCompanions();

    // leichte Vorvalidierung (blockt nur bei Fehlern)
    $('#form').addEventListener('submit',(e)=>{
      let ok = true;
      const must = [
        ['name','Bitte Name eintragen.'],
        ['email','Bitte E-Mail eintragen.'],
        ['city','Bitte Stadt/Ort eintragen.'],
        ['country','Bitte Land eintragen.'],
        ['deo_from','Bitte Startmonat/-jahr angeben.'],
        ['deo_to','Bitte Endmonat/-jahr angeben.'],
      ];
      must.forEach(([id,msg])=>{
        const v = document.getElementById(id)?.value?.trim();
        err(id, v ? '' : msg); ok &&= !!v;
      });

      const role = document.querySelector('input[name="role"]:checked')?.value;
      if(role==='schueler'){ const v=$('#classes')?.value?.trim(); ok &&= !!v; if(!v) err('classes','Bitte besuchte Klassen eintragen.'); }
      if(role==='lehrer'){ const v=$('#subjects')?.value?.trim(); ok &&= !!v; if(!v) err('subjects','Bitte F√§cher & Klassen eintragen.'); }
      if(role==='verwaltung'){ const v=$('#dept')?.value?.trim(); ok &&= !!v; if(!v) err('dept','Bitte Abteilung eintragen.'); }

      const ai = document.querySelector('input[name="attending"]:checked'); ok &&= !!ai; if(!ai) err('attending','Bitte ausw√§hlen, ob du kommst.');
      const fi = document.querySelector('input[name="future_interest"]:checked'); ok &&= !!fi; if(!fi) err('future_interest','Bitte Auswahl treffen.');
      const consent = document.getElementById('consent').checked; ok &&= consent; if(!consent) err('consent','Bitte Zustimmung erteilen.');

      if(!ok){ e.preventDefault(); window.scrollTo({top:0,behavior:'smooth'}); }
    });

    // JSON-Download
    $('#btnJson').addEventListener('click', ()=>{
      const role = document.querySelector('input[name="role"]:checked')?.value;
      const data = {
        name:$('#name').value.trim(),
        phone:$('#phone').value.trim(),
        email:$('#email').value.trim(),
        city:$('#city').value.trim(),
        country:$('#country').value.trim(),
        role,
        deo_from:$('#deo_from').value, deo_to:$('#deo_to').value,
        classes_attended: role==='schueler' ? ($('#classes')?.value.trim()||'') : '',
        subjects_taught: role==='lehrer' ? ($('#subjects')?.value.trim()||'') : '',
        dept: role==='verwaltung' ? ($('#dept')?.value.trim()||'') : '',
        attending: document.querySelector('input[name="attending"]:checked')?.value || '',
        companions: Number($('#companions')?.value||0),
        future_interest: document.querySelector('input[name="future_interest"]:checked')?.value || '',
        future_locations: $('#future_locations').value.trim(),
        consent: $('#consent').checked
      };
      const blob = new Blob([JSON.stringify(data,null,2)],{type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href=url;
      a.download=`vedeo-nrw-anmeldung-${(data.name||'unbekannt').replace(/\s+/g,'_')}.json`;
      a.click(); URL.revokeObjectURL(url);
    });
  </script>
</body>
</html>
