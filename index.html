<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>VEDEO NRW – Anmeldung (11.10.2025 Düsseldorf)</title>
  <meta name="description" content="Landing Page für das VEDEO NRW Treffen am 11. Oktober 2025 in Düsseldorf.">

  <style>
    :root{
      --flag-black:#000; --flag-red:#dd0000; --flag-gold:#ffce00;
      --bg:#f7f7f8; --text:#1f2937; --muted:#6b7280; --card:#fff; --border:#e5e7eb;
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif}
    .container{max-width:920px;margin:0 auto;padding:24px}

    /* Hero mit Deutschlandfarben */
    header.hero{border-radius:18px;overflow:hidden;margin:24px 0;background:linear-gradient(90deg,var(--flag-black) 0 33%, var(--flag-red) 33% 66%, var(--flag-gold) 66% 100%)}
    header.hero .inner{background:rgba(255,255,255,.94);padding:28px 24px}

    h1{margin:0 0 6px 0;font-size:clamp(24px,4vw,34px);font-weight:800}
    .subtitle{color:var(--muted);margin:0}

    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:18px;margin:16px 0;box-shadow:0 1px 0 rgba(0,0,0,.03)}
    h2.section{color:var(--flag-red);text-decoration:underline;text-underline-offset:6px;text-decoration-thickness:3px;margin:0 0 10px 0}

    label{display:block;font-size:14px;font-weight:600;margin-top:10px}
    input,textarea,select{width:100%;padding:10px 12px;border-radius:12px;border:1px solid var(--border);background:white;margin-top:6px;font-size:15px;outline:none}
    input:focus,textarea:focus,select:focus{border-color:var(--flag-red);box-shadow:0 0 0 3px #ffce0055}

    .row{display:grid;grid-template-columns:1fr;gap:12px}
    @media(min-width:760px){ .row{grid-template-columns:1fr 1fr} }

    .radio{display:flex;gap:14px;flex-wrap:wrap;margin-top:8px}
    .actions{display:flex;flex-wrap:wrap;gap:10px;margin-top:14px}
    .btn{padding:10px 14px;border-radius:12px;border:1px solid var(--border);background:white;cursor:pointer;font-weight:700}
    .btn.primary{background:var(--flag-red);color:#fff;border-color:var(--flag-red)}
    .btn.primary:hover{filter:brightness(.96)}
    .note{font-size:12px;color:#b91c1c;margin-top:4px}
    .muted{font-size:12px;color:var(--muted)}
    .success{background:#ecfdf5;border:1px solid #10b98130;color:#065f46;padding:12px;border-radius:12px;margin-top:12px}
    footer{margin:24px 0;color:var(--muted);text-align:center;font-size:12px}

    /* ====== Watermark (Totenkopf) – dezent unten rechts ====== */
    body.watermark::after{
      content:"";
      position:fixed;
      right:14px; bottom:14px;
      width:90px; height:90px;
      opacity:.08;               /* Helligkeit des Wasserzeichens */
      pointer-events:none;       /* Klicks nicht blockieren */
      background-repeat:no-repeat;
      background-size:contain;
      /* Inline-SVG (Skull) als Data-URL – keine externen Dateien nötig */
      background-image:url("data:image/svg+xml;utf8,\
        <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 128 128'>\
          <g fill='none' stroke='%23000' stroke-width='4' opacity='0.8'>\
            <circle cx='64' cy='52' r='36' fill='%23ffffff'/>\
            <circle cx='48' cy='48' r='9' fill='%23000'/>\
            <circle cx='80' cy='48' r='9' fill='%23000'/>\
            <path d='M64 64 c-8 0-16 6-16 14 v10 h32 V78 c0-8-8-14-16-14z' fill='%23000'/>\
            <path d='M40 86 v14 M88 86 v14 M28 92 v10 M100 92 v10'/>\
          </g>\
        </svg>");
    }
  </style>
</head>
<body class="watermark">
  <div class="container">
    <header class="hero">
      <div class="inner">
        <h1>VEDEO NRW – Anmeldung</h1>
        <p class="subtitle">Einladung zum <b>VEDEO NRW Treffen</b> am <b>Samstag, 11. Oktober 2025</b> in <b>Düsseldorf</b>.</p>
      </div>
    </header>

    <form id="form">
      <!-- Kontakt -->
      <div class="card">
        <h2 class="section">Kontaktinformationen</h2>
        <div class="row">
          <div>
            <label for="name">Name <span style="color:var(--flag-red)">*</span></label>
            <input id="name" required placeholder="Vor- und Nachname">
            <div class="note" data-err="name"></div>
          </div>
          <div>
            <label for="phone">Telefon</label>
            <input id="phone" placeholder="+49 …">
          </div>
          <div>
            <label for="email">E-Mail-Adresse <span style="color:var(--flag-red)">*</span></label>
            <!-- robustes E-Mail-Feld -->
            <input id="email" type="email" inputmode="email" autocomplete="email" required placeholder="name@example.com">
            <div class="note" data-err="email"></div>
          </div>
          <div>
            <label for="city">Adresse (Stadt/Ort) <span style="color:var(--flag-red)">*</span></label>
            <input id="city" required placeholder="z. B. Düsseldorf">
            <div class="note" data-err="city"></div>
          </div>
          <div>
            <label for="country">Land <span style="color:var(--flag-red)">*</span></label>
            <input id="country" value="Deutschland" required>
            <div class="note" data-err="country"></div>
          </div>
        </div>
      </div>

      <!-- Status -->
      <div class="card">
        <h2 class="section">Status an der DEO (ehemalig)</h2>
        <div class="radio">
          <label><input type="radio" name="role" value="schueler" checked> Ehemalige/r Schüler/in</label>
          <label><input type="radio" name="role" value="lehrer"> Ehemalige/r Lehrer/in</label>
          <label><input type="radio" name="role" value="verwaltung"> Ehemalige/r Verwaltungsbeauftragte/r</label>
        </div>
        <div class="row" style="margin-top:8px">
          <div>
            <label for="deo_from">Ab wann an der DEO <span style="color:var(--flag-red)">*</span></label>
            <input id="deo_from" type="month" required>
            <div class="note" data-err="deo_from"></div>
          </div>
          <div>
            <label for="deo_to">Bis wann an der DEO <span style="color:var(--flag-red)">*</span></label>
            <input id="deo_to" type="month" required>
            <div class="note" data-err="deo_to"></div>
          </div>
        </div>

        <div id="role-extra" style="margin-top:8px"></div>
      </div>

      <!-- Anmeldung -->
      <div class="card">
        <h2 class="section">Anmeldung zum VEDEO NRW Treffen</h2>
        <div>
          <label>Kommst Du zum Treffen? <span style="color:var(--flag-red)">*</span></label>
          <div class="radio">
            <label><input type="radio" name="attending" value="ja"> ja</label>
            <label><input type="radio" name="attending" value="nein"> nein</label>
            <label><input type="radio" name="attending" value="vielleicht"> vielleicht</label>
          </div>
          <div class="note" data-err="attending"></div>
        </div>
        <div id="companions-wrap" style="display:none;margin-top:10px">
          <label for="companions">Wer kommt noch mit (Anzahl der Begleiter)?</label>
          <input id="companions" type="number" min="0" value="0" style="max-width:160px">
          <div class="note" data-err="companions"></div>
        </div>
      </div>

      <!-- Zukunft -->
      <div class="card">
        <h2 class="section">Zukünftige VEDEO Treffen</h2>
        <div class="row">
          <div>
            <label>Interessiert an zukünftigen Treffen in NRW? <span style="color:var(--flag-red)">*</span></label>
            <div class="radio">
              <label><input type="radio" name="future_interest" value="ja"> ja</label>
              <label><input type="radio" name="future_interest" value="nein"> nein</label>
            </div>
            <div class="note" data-err="future_interest"></div>
          </div>
          <div>
            <label for="future_locations">Wo sonst in der Welt sollte VEDEO Treffen organisieren?</label>
            <input id="future_locations" type="text" placeholder="z. B. Kairo, Berlin, Dubai …">
          </div>
        </div>
      </div>

      <!-- Datenschutz -->
      <div class="card">
        <h2 class="section">Datenschutz</h2>
        <label><input id="consent" type="checkbox"> Ich stimme zu, dass meine Angaben zur Organisation des Treffens gespeichert und verarbeitet werden. <span style="color:var(--flag-red)">*</span></label>
        <div class="note" data-err="consent"></div>
        <p class="muted">Hinweis: Die Daten werden ausschließlich für Planung und Kommunikation zum VEDEO NRW Treffen verwendet.</p>
      </div>

      <div class="actions">
        <button type="submit" class="btn primary">Anmeldung prüfen</button>
        <button type="button" id="btnMail" class="btn">Als E-Mail öffnen</button>
        <button type="button" id="btnJson" class="btn">Daten als JSON herunterladen</button>
        <button type="reset" class="btn">Zurücksetzen</button>
      </div>

      <div id="ok" class="success" style="display:none"><b>Danke!</b> Deine Angaben sind vollständig. Du kannst sie jetzt als E-Mail senden oder als Datei speichern.</div>
    </form>

    <footer>© <span id="y"></span> VEDEO NRW – Treffen Düsseldorf, 11.10.2025</footer>
  </div>

  <script>
    const $ = (id)=>document.getElementById(id);
    const $$ = (sel)=>document.querySelector(sel);
    const err = (key, msg)=> (document.querySelector('[data-err="'+key+'"]').textContent = msg||'');

    // dynamische Felder je Rolle
    function renderRoleExtra(){
      const role = document.querySelector('input[name="role"]:checked').value;
      const wrap = $('role-extra'); wrap.innerHTML = '';
      if(role==='schueler'){
        wrap.innerHTML = '<label for="classes">Welche Klassen hast Du besucht? <span style="color:#dd0000">*</span></label>\
          <textarea id="classes" rows="3" placeholder="z. B. 5a–12b"></textarea><div class="note" data-err="classes"></div>';
      }else if(role==='lehrer'){
        wrap.innerHTML = '<label for="subjects">Welche Fächer & Klassen hast Du gelehrt? <span style="color:#dd0000">*</span></label>\
          <textarea id="subjects" rows="3" placeholder="z. B. Mathe (5–9), Physik (10–12)"></textarea><div class="note" data-err="subjects"></div>';
      }else{
        wrap.innerHTML = '<label for="dept">In welcher Abteilung hast Du gearbeitet? <span style="color:#dd0000">*</span></label>\
          <input id="dept" type="text" placeholder="z. B. Sekretariat, Verwaltung, Technik"><div class="note" data-err="dept"></div>';
      }
    }
    document.querySelectorAll('input[name="role"]').forEach(r=>r.addEventListener('change', renderRoleExtra));
    renderRoleExtra();

    // Begleiter sichtbar wenn "ja"
    document.querySelectorAll('input[name="attending"]').forEach(r=>r.addEventListener('change', ()=>{
      const v = document.querySelector('input[name="attending"]:checked')?.value;
      $('companions-wrap').style.display = (v==='ja') ? 'block' : 'none';
    }));

    // ------ ROBUSTE VALIDIERUNG (mit Browser-Check fürs E-Mail-Feld) ------
    function validate(){
      let ok = true;

      const name = $('name').value.trim();
      const emailEl = $('email'); emailEl.value = emailEl.value.trim();  // Auto-Trim
      const city = $('city').value.trim();
      const country = $('country').value.trim();
      const deo_from = $('deo_from').value;
      const deo_to = $('deo_to').value;
      const role = document.querySelector('input[name="role"]:checked').value;
      const attending = document.querySelector('input[name="attending"]:checked')?.value || '';
      const future_interest = document.querySelector('input[name="future_interest"]:checked')?.value || '';
      const consent = $('consent').checked;

      err('name', name? '' : 'Bitte Name eintragen.'); ok &&= !!name;

      if (!emailEl.value){
        err('email','Bitte E-Mail eintragen.'); ok = false;
      } else if (!emailEl.checkValidity()){
        err('email','Ungültige E-Mail-Adresse.'); ok = false;
      } else { err('email',''); }

      err('city', city? '' : 'Bitte Stadt/Ort eintragen.'); ok &&= !!city;
      err('country', country? '' : 'Bitte Land eintragen.'); ok &&= !!country;
      err('deo_from', deo_from? '' : 'Bitte Startmonat/-jahr angeben.'); ok &&= !!deo_from;
      err('deo_to', deo_to? '' : 'Bitte Endmonat/-jahr angeben.'); ok &&= !!deo_to;

      if(role==='schueler'){ const v = $('classes')?.value.trim() || ''; err('classes', v? '' : 'Bitte besuchte Klassen eintragen.'); ok &&= !!v; }
      if(role==='lehrer'){ const v = $('subjects')?.value.trim() || ''; err('subjects', v? '' : 'Bitte Fächer & Klassen eintragen.'); ok &&= !!v; }
      if(role==='verwaltung'){ const v = $('dept')?.value.trim() || ''; err('dept', v? '' : 'Bitte Abteilung eintragen.'); ok &&= !!v; }

      err('attending', attending? '' : 'Bitte auswählen, ob du kommst.'); ok &&= !!attending;
      if(attending==='ja'){
        const c = Number($('companions').value);
        const good = Number.isFinite(c) && c>=0;
        err('companions', good? '' : 'Bitte Anzahl Begleiter (≥ 0).'); ok &&= good;
      } else { err('companions',''); }

      err('future_interest', future_interest? '' : 'Bitte Auswahl treffen.'); ok &&= !!future_interest;
      err('consent', consent? '' : 'Bitte Zustimmung erteilen.'); ok &&= consent;

      return ok;
    }

    // beim Verlassen E-Mail trimmen (optional)
    $('email').addEventListener('blur', () => { $('email').value = $('email').value.trim(); });

    // Form submit
    $('form').addEventListener('submit', (e)=>{
      e.preventDefault();
      const ok = validate();
      $('ok').style.display = ok? 'block':'none';
    });

    // JSON Download
    $('btnJson').addEventListener('click', ()=>{
      const data = collectData();
      const blob = new Blob([JSON.stringify(data,null,2)],{type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = `vedeo-nrw-anmeldung-${(data.name||'unbekannt').replace(/\s+/g,'_')}.json`;
      a.click(); URL.revokeObjectURL(url);
    });

    // Mailto
    $('btnMail').addEventListener('click', ()=>{
      if(!validate()) return;
      const d = collectData();
      const recipient = "zollnerjosef3@gmail.com";
      const ccRecipient = "AhmedShteiwey@gmail.com";
      const subject = encodeURIComponent(`Anmeldung VEDEO NRW Treffen – 11.10.2025 – ${d.name||''}`);
      const lines = [
        'Kontaktinformationen:',
        `Name: ${d.name}`,
        `Telefon: ${d.phone||''}`,
        `E-Mail: ${d.email}`,
        `Adresse: ${d.city}, ${d.country}`,
        '',
        d.role==='schueler'
          ? `Ehemalige/r Schüler/in – DEO: von ${d.deo_from} bis ${d.deo_to}; Klassen: ${d.classes_attended}`
          : d.role==='lehrer'
          ? `Ehemalige/r Lehrer/in – DEO: von ${d.deo_from} bis ${d.deo_to}; Fächer & Klassen: ${d.subjects_taught}`
          : `Ehemalige/r Verwaltungsbeauftragte/r – DEO: von ${d.deo_from} bis ${d.deo_to}; Abteilung: ${d.dept}`,
        '',
        `Kommst Du zum Treffen? ${d.attending}`,
        d.attending==='ja' ? `Begleiter: ${d.companions}` : '',
        '',
        `Zukünftige VEDEO Treffen – Interesse in NRW: ${d.future_interest}`,
        `Weitere Orte: ${d.future_locations||''}`,
      ].filter(Boolean).join('\n');
      const body = encodeURIComponent(lines);
      window.location.href = `mailto:${encodeURIComponent(recipient)}?cc=${encodeURIComponent(ccRecipient)}&subject=${subject}&body=${body}`;
    });

    function collectData(){
      const role = document.querySelector('input[name="role"]:checked').value;
      return {
        name:$('name').value.trim(),
        phone:$('phone').value.trim(),
        email:$('email').value.trim(),
        city:$('city').value.trim(),
        country:$('country').value.trim(),
        role,
        deo_from:$('deo_from').value, deo_to:$('deo_to').value,
        classes_attended: role==='schueler' ? ($('classes')?.value.trim()||'') : '',
        subjects_taught: role==='lehrer' ? ($('subjects')?.value.trim()||'') : '',
        dept: role==='verwaltung' ? ($('dept')?.value.trim()||'') : '',
        attending: document.querySelector('input[name="attending"]:checked')?.value || '',
        companions: $('companions-wrap').style.display==='block' ? Number($('companions').value||0) : 0,
        future_interest: document.querySelector('input[name="future_interest"]:checked')?.value || '',
        future_locations: $('future_locations').value.trim(),
        consent:$('consent').checked,
      };
    }

    $('y').textContent = new Date().getFullYear();
  </script>
</body>
</html>
